\hypertarget{_a_d_c_8c}{\section{A\-D\-C.\-c File Reference}
\label{_a_d_c_8c}\index{A\-D\-C.\-c@{A\-D\-C.\-c}}
}
{\ttfamily \#include \char`\"{}A\-D\-C.\-h\char`\"{}}\\*
{\ttfamily \#include $<$stdint.\-h$>$}\\*
{\ttfamily \#include \char`\"{}inc/tm4c123gh6pm.\-h\char`\"{}}\\*
Include dependency graph for A\-D\-C.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{_a_d_c_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d}{Disable\-Interrupts} (void)
\item 
void \hyperlink{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4}{Enable\-Interrupts} (void)
\item 
long \hyperlink{_a_d_c_8c_a6e7e2088607214bc15b17ac57b57df1b}{Start\-Critical} (void)
\item 
void \hyperlink{_a_d_c_8c_a670da3ff1aea0c7d54c40e9e40b5eeed}{End\-Critical} (long sr)
\item 
void \hyperlink{_a_d_c_8c_a80ae22f2f73496246542c428c4bec38f}{Wait\-For\-Interrupt} (void)
\item 
void \hyperlink{_a_d_c_8c_ae8d554822fd2041b8a2366ced9c0ec61}{A\-D\-C0\-Seq2\-\_\-\-Handler} (void)
\item 
void \hyperlink{_a_d_c_8c_a532438ab848632da93412a0c51c229d4}{A\-D\-C0\-Seq3\-\_\-\-Handler} (void)
\item 
void \hyperlink{_a_d_c_8c_a1a2f34caa5b32ab969b9fb7d4c0b1d6b}{A\-D\-C0\-Seq1\-\_\-\-Handler} (void)
\item 
int \hyperlink{_a_d_c_8c_ae7cef9ecd73d25c0931372d21e6be943}{A\-D\-C\-\_\-init\-\_\-channel} (int channel\-Num, unsigned int fs)
\item 
int \hyperlink{_a_d_c_8c_a9fdea7e06f4c4769ab22981dafb58477}{A\-D\-C\-\_\-\-Collect} (unsigned int channel\-Num, unsigned int fs, unsigned short \hyperlink{_lab5_8c_a9516ea594e030f96eb9483d95f1583a5}{buffer}\mbox{[}$\,$\mbox{]}, unsigned int number\-Of\-Samples)
\begin{DoxyCompactList}\small\item\em Collect a set number of samples. \end{DoxyCompactList}\item 
int \hyperlink{_a_d_c_8c_ab991147608f978ac77baf774334e802b}{A\-D\-C\-\_\-\-Status} (int id)
\begin{DoxyCompactList}\small\item\em returns 0 when A\-D\-C\-\_\-collect finishes \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
volatile int \hyperlink{_a_d_c_8c_aa9e74f4242577ace4147b2205821a7a3}{Open} \mbox{[}4\mbox{]} = \{0,0,0,0\}
\item 
volatile int \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting} \mbox{[}4\mbox{]} = \{0,0,0,0\}
\item 
volatile unsigned short $\ast$ \hyperlink{_a_d_c_8c_a5a00ab78e84682ce357562e66203fbc9}{Buffer0}
\item 
volatile unsigned short $\ast$ \hyperlink{_a_d_c_8c_a5e510bf438e51a8252b7eee23ae1ba88}{Buffer1}
\item 
volatile unsigned short $\ast$ \hyperlink{_a_d_c_8c_ac4491cb99756a73234eb72f199e64cad}{Buffer2}
\item 
volatile unsigned short $\ast$ \hyperlink{_a_d_c_8c_ac4192b26a52a91f1541df9414277376c}{Buffer3}
\item 
volatile int \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{Sample\-Count} \mbox{[}4\mbox{]}
\item 
volatile int \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{Target\-Count} \mbox{[}4\mbox{]}
\item 
volatile int \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{Current\-Channel}
\item 
volatile unsigned short \hyperlink{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{dummy0}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{_a_d_c_8c_a1a2f34caa5b32ab969b9fb7d4c0b1d6b}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C0\-Seq1\-\_\-\-Handler@{A\-D\-C0\-Seq1\-\_\-\-Handler}}
\index{A\-D\-C0\-Seq1\-\_\-\-Handler@{A\-D\-C0\-Seq1\-\_\-\-Handler}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C0\-Seq1\-\_\-\-Handler}]{\setlength{\rightskip}{0pt plus 5cm}void A\-D\-C0\-Seq1\-\_\-\-Handler (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a1a2f34caa5b32ab969b9fb7d4c0b1d6b}
\hypertarget{_a_d_c_8c_ae8d554822fd2041b8a2366ced9c0ec61}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C0\-Seq2\-\_\-\-Handler@{A\-D\-C0\-Seq2\-\_\-\-Handler}}
\index{A\-D\-C0\-Seq2\-\_\-\-Handler@{A\-D\-C0\-Seq2\-\_\-\-Handler}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C0\-Seq2\-\_\-\-Handler}]{\setlength{\rightskip}{0pt plus 5cm}void A\-D\-C0\-Seq2\-\_\-\-Handler (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_ae8d554822fd2041b8a2366ced9c0ec61}


Definition at line 248 of file A\-D\-C.\-c.


\begin{DoxyCode}
248                            \{
249   \textcolor{keywordflow}{if}(\hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[\hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel}] > 0)\{
250     ADC0\_ISC\_R = 0x04;          \textcolor{comment}{// acknowledge ADC sequence 2 completion}
251     \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[\hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel}]+=2;          \textcolor{comment}{// taking care of reducing the
       frequency by a factor 2}
252     \textcolor{keywordflow}{switch}(\hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel})\{
253       \textcolor{keywordflow}{case} 0: \hyperlink{_a_d_c_8c_a5a00ab78e84682ce357562e66203fbc9}{Buffer0}[\hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[0]/2] = ADC0\_SSFIFO2\_R;  
      \hyperlink{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{dummy0} = ADC0\_SSFIFO2\_R; \textcolor{keywordflow}{break};
254       \textcolor{keywordflow}{case} 1: \hyperlink{_a_d_c_8c_a5e510bf438e51a8252b7eee23ae1ba88}{Buffer1}[SampleCount[1]/2] = ADC0\_SSFIFO2\_R;  \hyperlink{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{dummy0} = ADC0\_SSFIFO2\_R; \textcolor{keywordflow}{break};
255       \textcolor{keywordflow}{case} 2: \hyperlink{_a_d_c_8c_ac4491cb99756a73234eb72f199e64cad}{Buffer2}[SampleCount[2]/2] = ADC0\_SSFIFO2\_R;  \hyperlink{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{dummy0} = ADC0\_SSFIFO2\_R; \textcolor{keywordflow}{break};
256       \textcolor{keywordflow}{case} 3: \hyperlink{_a_d_c_8c_ac4192b26a52a91f1541df9414277376c}{Buffer3}[SampleCount[3]/2] = ADC0\_SSFIFO2\_R;  \hyperlink{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{dummy0} = ADC0\_SSFIFO2\_R; \textcolor{keywordflow}{break};
257     \}
258     
259 \textcolor{comment}{//    Buffer[0][SampleCount[0]++] = ADC0\_SSFIFO2\_R;}
260     \textcolor{comment}{//TODO May need to double read to pop from fifo}
261     \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[\hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel}] = \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{TargetCount}[
      \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel}] - \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[\hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel}]; \textcolor{comment}{//Faster than
       branching}
262   \}
263   \textcolor{keywordflow}{else}\{ \textcolor{comment}{//Not Collecting}
264     NVIC\_DIS0\_R = 1<<16; \textcolor{comment}{//Disable SS2 Interrupt}
265   \}
266 \}
\end{DoxyCode}
\hypertarget{_a_d_c_8c_a532438ab848632da93412a0c51c229d4}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C0\-Seq3\-\_\-\-Handler@{A\-D\-C0\-Seq3\-\_\-\-Handler}}
\index{A\-D\-C0\-Seq3\-\_\-\-Handler@{A\-D\-C0\-Seq3\-\_\-\-Handler}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C0\-Seq3\-\_\-\-Handler}]{\setlength{\rightskip}{0pt plus 5cm}void A\-D\-C0\-Seq3\-\_\-\-Handler (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a532438ab848632da93412a0c51c229d4}
\hypertarget{_a_d_c_8c_a9fdea7e06f4c4769ab22981dafb58477}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C\-\_\-\-Collect@{A\-D\-C\-\_\-\-Collect}}
\index{A\-D\-C\-\_\-\-Collect@{A\-D\-C\-\_\-\-Collect}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C\-\_\-\-Collect}]{\setlength{\rightskip}{0pt plus 5cm}int A\-D\-C\-\_\-\-Collect (
\begin{DoxyParamCaption}
\item[{unsigned int}]{channel\-Num, }
\item[{unsigned int}]{fs, }
\item[{unsigned short}]{buffer\mbox{[}$\,$\mbox{]}, }
\item[{unsigned int}]{number\-Of\-Samples}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a9fdea7e06f4c4769ab22981dafb58477}


Collect a set number of samples. 

Collect a sequence of A\-D\-C values.

\mbox{[}long description\mbox{]}


\begin{DoxyParams}{Parameters}
{\em channel\-Num} & Channel to configure \\
\hline
{\em fs} & Sample Frequency (Hz) must be between 100\-Hz and 10k\-Hz \\
\hline
{\em buffer} & Array to buffer data, does not bounds check buffer \\
\hline
{\em number\-Of\-Samples} & number of samples to record must be even number $>$ 1 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if initialization successful, -\/1 if fail
\end{DoxyReturn}
Uses A\-D\-C Sample Sequencer 2 and Timer 0. Does not require call to \hyperlink{_a_d_c_8h_a9b319827131872257b8c6a8658852cc0}{A\-D\-C\-\_\-\-Open()} 

Definition at line 171 of file A\-D\-C.\-c.


\begin{DoxyCode}
173 \{
174   \textcolor{keywordflow}{if}(fs < 100 || fs > 10000)\{
175     \textcolor{keywordflow}{return} -1;
176   \}
177   \textcolor{keywordflow}{if}(numberOfSamples < 1)\{
178     \textcolor{keywordflow}{return} -1;
179   \}
180   
181   \hyperlink{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d}{DisableInterrupts}();
182   ADC0\_ACTSS\_R &= ~0x04;    \textcolor{comment}{// disable sample sequencer 2}
183   ADC0\_EMUX\_R = (ADC0\_EMUX\_R&0xFFFFF0FF)+0x0500; \textcolor{comment}{// timer trigger event SS2}
184 
185   ADC0\_SAC\_R = 0x02;  \textcolor{comment}{// 4x Hardware Oversample}
186  
187   ADC0\_SSMUX2\_R = (channelNum << 4) | channelNum;
188   ADC0\_SSCTL2\_R = 0x064;          \textcolor{comment}{// set flag and end, 2 samples at a time                      }
189   ADC0\_IM\_R |= 0x04;             \textcolor{comment}{// enable SS2 interrupts}
190   ADC0\_ACTSS\_R |= 0x04;          \textcolor{comment}{// enable sample sequencer 2}
191   NVIC\_PRI4\_R = (NVIC\_PRI4\_R & 0xFFFF00FF)|0x00004000; \textcolor{comment}{//priority 2}
192   NVIC\_EN0\_R = 1<<16;              \textcolor{comment}{// enable interrupt 16 in NVIC}
193                                    \textcolor{comment}{//Sample Sequencer 2}
194   \textcolor{keywordflow}{if}(channelNum == 0)\{
195     \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[0] = 1;
196     \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[0] = 0;
197     \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{TargetCount}[0] = numberOfSamples;
198     \hyperlink{_a_d_c_8c_a5a00ab78e84682ce357562e66203fbc9}{Buffer0} = \hyperlink{interpreter_8h_ab4a03da084e15d3319078d4f4a6bf3ff}{buffer};
199     \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel} = 0;
200   \}
201   \textcolor{keywordflow}{if}(channelNum == 1)\{
202     \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[1] = 1;
203     \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[1] = 0;
204     \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{TargetCount}[1] = numberOfSamples;
205     \hyperlink{_a_d_c_8c_a5e510bf438e51a8252b7eee23ae1ba88}{Buffer1} = \hyperlink{interpreter_8h_ab4a03da084e15d3319078d4f4a6bf3ff}{buffer};
206     \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel} = 1;
207   \}
208   \textcolor{keywordflow}{if}(channelNum == 2)\{
209     \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[2] = 1;
210     \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[2] = 0;
211     \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{TargetCount}[2] = numberOfSamples;
212     \hyperlink{_a_d_c_8c_ac4491cb99756a73234eb72f199e64cad}{Buffer2} = \hyperlink{interpreter_8h_ab4a03da084e15d3319078d4f4a6bf3ff}{buffer};
213     \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel} = 2;
214   \}
215   \textcolor{keywordflow}{if}(channelNum == 4)\{
216     \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[3] = 1;
217     \hyperlink{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{SampleCount}[3] = 0;
218     \hyperlink{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{TargetCount}[3] = numberOfSamples;
219     \hyperlink{_a_d_c_8c_ac4192b26a52a91f1541df9414277376c}{Buffer3} = \hyperlink{interpreter_8h_ab4a03da084e15d3319078d4f4a6bf3ff}{buffer};
220     \hyperlink{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{CurrentChannel} = 3;
221   \}
222   \hyperlink{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4}{EnableInterrupts}();
223 
224   \textcolor{keywordflow}{return} \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[0];
225 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=282pt]{_a_d_c_8c_a9fdea7e06f4c4769ab22981dafb58477_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{_a_d_c_8c_a9fdea7e06f4c4769ab22981dafb58477_icgraph}
\end{center}
\end{figure}


\hypertarget{_a_d_c_8c_ae7cef9ecd73d25c0931372d21e6be943}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C\-\_\-init\-\_\-channel@{A\-D\-C\-\_\-init\-\_\-channel}}
\index{A\-D\-C\-\_\-init\-\_\-channel@{A\-D\-C\-\_\-init\-\_\-channel}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C\-\_\-init\-\_\-channel}]{\setlength{\rightskip}{0pt plus 5cm}int A\-D\-C\-\_\-init\-\_\-channel (
\begin{DoxyParamCaption}
\item[{int}]{channel\-Num, }
\item[{unsigned int}]{fs}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_ae7cef9ecd73d25c0931372d21e6be943}


Definition at line 36 of file A\-D\-C.\-c.


\begin{DoxyCode}
36                                                      \{
37   \textcolor{keyword}{volatile} uint32\_t delay;
38   \textcolor{keywordflow}{if}(fs < 100 || fs > 10000)\{
39     \textcolor{keywordflow}{return} -1;
40   \} 
41   \textcolor{comment}{// **** GPIO pin initialization ****}
42   \textcolor{keywordflow}{switch}(channelNum)\{             \textcolor{comment}{// 1) activate clock}
43     \textcolor{keywordflow}{case} 0:
44     \textcolor{keywordflow}{case} 1:
45     \textcolor{keywordflow}{case} 2:
46     \textcolor{keywordflow}{case} 3:
47     \textcolor{keywordflow}{case} 8:
48     \textcolor{keywordflow}{case} 9:                       \textcolor{comment}{//    these are on GPIO\_PORTE}
49       SYSCTL\_RCGCGPIO\_R |= SYSCTL\_RCGCGPIO\_R4; \textcolor{keywordflow}{break};
50     \textcolor{keywordflow}{case} 4:
51     \textcolor{keywordflow}{case} 5:
52     \textcolor{keywordflow}{case} 6:
53     \textcolor{keywordflow}{case} 7:                       \textcolor{comment}{// these are on GPIO\_PORTD}
54       SYSCTL\_RCGCGPIO\_R |= SYSCTL\_RCGCGPIO\_R3; \textcolor{keywordflow}{break};
55     \textcolor{keywordflow}{case} 10:
56     \textcolor{keywordflow}{case} 11:                      \textcolor{comment}{// these are on GPIO\_PORTB}
57       SYSCTL\_RCGCGPIO\_R |= SYSCTL\_RCGCGPIO\_R1; \textcolor{keywordflow}{break};
58     \textcolor{keywordflow}{default}: \textcolor{keywordflow}{return} -1;              \textcolor{comment}{//0 to 11 are valid channels on the LM4F120}
59   \}
60   delay = SYSCTL\_RCGCGPIO\_R;      \textcolor{comment}{// 2) allow time for clock to stabilize}
61   delay = SYSCTL\_RCGCGPIO\_R;
62   \textcolor{keywordflow}{switch}(channelNum)\{
63     \textcolor{keywordflow}{case} 0:                       \textcolor{comment}{//      Ain0 is on PE3}
64       GPIO\_PORTE\_DIR\_R &= ~0x08;  \textcolor{comment}{// 3.0) make PE3 input}
65       GPIO\_PORTE\_AFSEL\_R |= 0x08; \textcolor{comment}{// 4.0) enable alternate function on PE3}
66       GPIO\_PORTE\_DEN\_R &= ~0x08;  \textcolor{comment}{// 5.0) disable digital I/O on PE3}
67       GPIO\_PORTE\_AMSEL\_R |= 0x08; \textcolor{comment}{// 6.0) enable analog functionality on PE3}
68       \textcolor{keywordflow}{break};
69     \textcolor{keywordflow}{case} 1:                       \textcolor{comment}{//      Ain1 is on PE2}
70       GPIO\_PORTE\_DIR\_R &= ~0x04;  \textcolor{comment}{// 3.1) make PE2 input}
71       GPIO\_PORTE\_AFSEL\_R |= 0x04; \textcolor{comment}{// 4.1) enable alternate function on PE2}
72       GPIO\_PORTE\_DEN\_R &= ~0x04;  \textcolor{comment}{// 5.1) disable digital I/O on PE2}
73       GPIO\_PORTE\_AMSEL\_R |= 0x04; \textcolor{comment}{// 6.1) enable analog functionality on PE2}
74       \textcolor{keywordflow}{break};
75     \textcolor{keywordflow}{case} 2:                       \textcolor{comment}{//      Ain2 is on PE1}
76       GPIO\_PORTE\_DIR\_R &= ~0x02;  \textcolor{comment}{// 3.2) make PE1 input}
77       GPIO\_PORTE\_AFSEL\_R |= 0x02; \textcolor{comment}{// 4.2) enable alternate function on PE1}
78       GPIO\_PORTE\_DEN\_R &= ~0x02;  \textcolor{comment}{// 5.2) disable digital I/O on PE1}
79       GPIO\_PORTE\_AMSEL\_R |= 0x02; \textcolor{comment}{// 6.2) enable analog functionality on PE1}
80       \textcolor{keywordflow}{break};
81     \textcolor{keywordflow}{case} 3:                       \textcolor{comment}{//      Ain3 is on PE0}
82       GPIO\_PORTE\_DIR\_R &= ~0x01;  \textcolor{comment}{// 3.3) make PE0 input}
83       GPIO\_PORTE\_AFSEL\_R |= 0x01; \textcolor{comment}{// 4.3) enable alternate function on PE0}
84       GPIO\_PORTE\_DEN\_R &= ~0x01;  \textcolor{comment}{// 5.3) disable digital I/O on PE0}
85       GPIO\_PORTE\_AMSEL\_R |= 0x01; \textcolor{comment}{// 6.3) enable analog functionality on PE0}
86       \textcolor{keywordflow}{break};
87     \textcolor{keywordflow}{case} 4:                       \textcolor{comment}{//      Ain4 is on PD3}
88       GPIO\_PORTD\_DIR\_R &= ~0x08;  \textcolor{comment}{// 3.4) make PD3 input}
89       GPIO\_PORTD\_AFSEL\_R |= 0x08; \textcolor{comment}{// 4.4) enable alternate function on PD3}
90       GPIO\_PORTD\_DEN\_R &= ~0x08;  \textcolor{comment}{// 5.4) disable digital I/O on PD3}
91       GPIO\_PORTD\_AMSEL\_R |= 0x08; \textcolor{comment}{// 6.4) enable analog functionality on PD3}
92       \textcolor{keywordflow}{break};
93     \textcolor{keywordflow}{case} 5:                       \textcolor{comment}{//      Ain5 is on PD2}
94       GPIO\_PORTD\_DIR\_R &= ~0x04;  \textcolor{comment}{// 3.5) make PD2 input}
95       GPIO\_PORTD\_AFSEL\_R |= 0x04; \textcolor{comment}{// 4.5) enable alternate function on PD2}
96       GPIO\_PORTD\_DEN\_R &= ~0x04;  \textcolor{comment}{// 5.5) disable digital I/O on PD2}
97       GPIO\_PORTD\_AMSEL\_R |= 0x04; \textcolor{comment}{// 6.5) enable analog functionality on PD2}
98       \textcolor{keywordflow}{break};
99     \textcolor{keywordflow}{case} 6:                       \textcolor{comment}{//      Ain6 is on PD1}
100       GPIO\_PORTD\_DIR\_R &= ~0x02;  \textcolor{comment}{// 3.6) make PD1 input}
101       GPIO\_PORTD\_AFSEL\_R |= 0x02; \textcolor{comment}{// 4.6) enable alternate function on PD1}
102       GPIO\_PORTD\_DEN\_R &= ~0x02;  \textcolor{comment}{// 5.6) disable digital I/O on PD1}
103       GPIO\_PORTD\_AMSEL\_R |= 0x02; \textcolor{comment}{// 6.6) enable analog functionality on PD1}
104       \textcolor{keywordflow}{break};
105     \textcolor{keywordflow}{case} 7:                       \textcolor{comment}{//      Ain7 is on PD0}
106       GPIO\_PORTD\_DIR\_R &= ~0x01;  \textcolor{comment}{// 3.7) make PD0 input}
107       GPIO\_PORTD\_AFSEL\_R |= 0x01; \textcolor{comment}{// 4.7) enable alternate function on PD0}
108       GPIO\_PORTD\_DEN\_R &= ~0x01;  \textcolor{comment}{// 5.7) disable digital I/O on PD0}
109       GPIO\_PORTD\_AMSEL\_R |= 0x01; \textcolor{comment}{// 6.7) enable analog functionality on PD0}
110       \textcolor{keywordflow}{break};
111     \textcolor{keywordflow}{case} 8:                       \textcolor{comment}{//      Ain8 is on PE5}
112       GPIO\_PORTE\_DIR\_R &= ~0x20;  \textcolor{comment}{// 3.8) make PE5 input}
113       GPIO\_PORTE\_AFSEL\_R |= 0x20; \textcolor{comment}{// 4.8) enable alternate function on PE5}
114       GPIO\_PORTE\_DEN\_R &= ~0x20;  \textcolor{comment}{// 5.8) disable digital I/O on PE5}
115       GPIO\_PORTE\_AMSEL\_R |= 0x20; \textcolor{comment}{// 6.8) enable analog functionality on PE5}
116       \textcolor{keywordflow}{break};
117     \textcolor{keywordflow}{case} 9:                       \textcolor{comment}{//      Ain9 is on PE4}
118       GPIO\_PORTE\_DIR\_R &= ~0x10;  \textcolor{comment}{// 3.9) make PE4 input}
119       GPIO\_PORTE\_AFSEL\_R |= 0x10; \textcolor{comment}{// 4.9) enable alternate function on PE4}
120       GPIO\_PORTE\_DEN\_R &= ~0x10;  \textcolor{comment}{// 5.9) disable digital I/O on PE4}
121       GPIO\_PORTE\_AMSEL\_R |= 0x10; \textcolor{comment}{// 6.9) enable analog functionality on PE4}
122       \textcolor{keywordflow}{break};
123     \textcolor{keywordflow}{case} 10:                      \textcolor{comment}{//       Ain10 is on PB4}
124       GPIO\_PORTB\_DIR\_R &= ~0x10;  \textcolor{comment}{// 3.10) make PB4 input}
125       GPIO\_PORTB\_AFSEL\_R |= 0x10; \textcolor{comment}{// 4.10) enable alternate function on PB4}
126       GPIO\_PORTB\_DEN\_R &= ~0x10;  \textcolor{comment}{// 5.10) disable digital I/O on PB4}
127       GPIO\_PORTB\_AMSEL\_R |= 0x10; \textcolor{comment}{// 6.10) enable analog functionality on PB4}
128       \textcolor{keywordflow}{break};
129     \textcolor{keywordflow}{case} 11:                      \textcolor{comment}{//       Ain11 is on PB5}
130       GPIO\_PORTB\_DIR\_R &= ~0x20;  \textcolor{comment}{// 3.11) make PB5 input}
131       GPIO\_PORTB\_AFSEL\_R |= 0x20; \textcolor{comment}{// 4.11) enable alternate function on PB5}
132       GPIO\_PORTB\_DEN\_R &= ~0x20;  \textcolor{comment}{// 5.11) disable digital I/O on PB5}
133       GPIO\_PORTB\_AMSEL\_R |= 0x20; \textcolor{comment}{// 6.11) enable analog functionality on PB5}
134       \textcolor{keywordflow}{break};
135   \}
136   \hyperlink{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d}{DisableInterrupts}();
137   SYSCTL\_RCGCADC\_R |= 0x01;     \textcolor{comment}{// activate ADC0 }
138   SYSCTL\_RCGCTIMER\_R |= 0x01;   \textcolor{comment}{// activate timer0 }
139   delay = SYSCTL\_RCGCTIMER\_R;   \textcolor{comment}{// allow time to finish activating}
140 
141   TIMER0\_CTL\_R = 0x00000000;    \textcolor{comment}{// disable timer0A during setup}
142   TIMER0\_CTL\_R |= 0x00000020;   \textcolor{comment}{// enable timer0A trigger to ADC}
143   TIMER0\_CFG\_R = 0;             \textcolor{comment}{// configure for 32-bit timer mode}
144   TIMER0\_TAMR\_R = 0x00000002;   \textcolor{comment}{// configure for periodic mode, default down-count settings}
145   TIMER0\_TAPR\_R = 0;            \textcolor{comment}{// prescale value for trigger}
146   TIMER0\_TAILR\_R = (80000000/fs)-1;    \textcolor{comment}{// start value for trigger}
147   TIMER0\_IMR\_R = 0x00000000;    \textcolor{comment}{// disable all interrupts}
148   TIMER0\_CTL\_R |= 0x00000001;   \textcolor{comment}{// enable timer0A 32-b, periodic, no interrupts}
149   
150   ADC0\_PC\_R = 0x01;         \textcolor{comment}{// configure for 125K samples/sec}
151   ADC0\_SSPRI\_R = 0x3210;    \textcolor{comment}{// sequencer 0 is highest, sequencer 3 is lowest}
152   \hyperlink{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4}{EnableInterrupts}();
153   \textcolor{keywordflow}{return} 1;
154 \}
\end{DoxyCode}


Here is the call graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{_a_d_c_8c_ae7cef9ecd73d25c0931372d21e6be943_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=318pt]{_a_d_c_8c_ae7cef9ecd73d25c0931372d21e6be943_icgraph}
\end{center}
\end{figure}


\hypertarget{_a_d_c_8c_ab991147608f978ac77baf774334e802b}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!A\-D\-C\-\_\-\-Status@{A\-D\-C\-\_\-\-Status}}
\index{A\-D\-C\-\_\-\-Status@{A\-D\-C\-\_\-\-Status}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{A\-D\-C\-\_\-\-Status}]{\setlength{\rightskip}{0pt plus 5cm}int A\-D\-C\-\_\-\-Status (
\begin{DoxyParamCaption}
\item[{int}]{id}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_ab991147608f978ac77baf774334e802b}


returns 0 when A\-D\-C\-\_\-collect finishes 

\begin{DoxyReturn}{Returns}
0 if A\-D\-C\-\_\-collect is complete, else value is the Target\-Count -\/ current Sample\-Count
\end{DoxyReturn}
Acknowledges completion at beginning of handler to minimize sample jitter. since max sample rate is 10\-K\-Hz = 100us at 80\-M\-Hz system clock, I\-S\-R likely to be relatively short. 

Definition at line 237 of file A\-D\-C.\-c.


\begin{DoxyCode}
238 \{
239   \textcolor{keywordflow}{switch}(\textcolor{keywordtype}{id})\{
240     \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{return} \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[0]; \textcolor{keywordflow}{break};
241     \textcolor{keywordflow}{case} 1: \textcolor{keywordflow}{return} \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[1]; \textcolor{keywordflow}{break};
242     \textcolor{keywordflow}{case} 2: \textcolor{keywordflow}{return} \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[2]; \textcolor{keywordflow}{break};
243     \textcolor{keywordflow}{case} 3: \textcolor{keywordflow}{return} \hyperlink{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{Collecting}[3]; \textcolor{keywordflow}{break};
244   \}
245 \}
\end{DoxyCode}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{_a_d_c_8c_ab991147608f978ac77baf774334e802b_icgraph}
\end{center}
\end{figure}


\hypertarget{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Disable\-Interrupts@{Disable\-Interrupts}}
\index{Disable\-Interrupts@{Disable\-Interrupts}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Disable\-Interrupts}]{\setlength{\rightskip}{0pt plus 5cm}void Disable\-Interrupts (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_a_d_c_8c_ac866dbaf7b167e5c46bb33de42eee84d_icgraph}
\end{center}
\end{figure}


\hypertarget{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Enable\-Interrupts@{Enable\-Interrupts}}
\index{Enable\-Interrupts@{Enable\-Interrupts}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Enable\-Interrupts}]{\setlength{\rightskip}{0pt plus 5cm}void Enable\-Interrupts (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4}


Here is the caller graph for this function\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{_a_d_c_8c_ab712356331a62b04aebcb373865e68c4_icgraph}
\end{center}
\end{figure}


\hypertarget{_a_d_c_8c_a670da3ff1aea0c7d54c40e9e40b5eeed}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!End\-Critical@{End\-Critical}}
\index{End\-Critical@{End\-Critical}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{End\-Critical}]{\setlength{\rightskip}{0pt plus 5cm}void End\-Critical (
\begin{DoxyParamCaption}
\item[{long}]{sr}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a670da3ff1aea0c7d54c40e9e40b5eeed}
\hypertarget{_a_d_c_8c_a6e7e2088607214bc15b17ac57b57df1b}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Start\-Critical@{Start\-Critical}}
\index{Start\-Critical@{Start\-Critical}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Start\-Critical}]{\setlength{\rightskip}{0pt plus 5cm}long Start\-Critical (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a6e7e2088607214bc15b17ac57b57df1b}
\hypertarget{_a_d_c_8c_a80ae22f2f73496246542c428c4bec38f}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Wait\-For\-Interrupt@{Wait\-For\-Interrupt}}
\index{Wait\-For\-Interrupt@{Wait\-For\-Interrupt}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Wait\-For\-Interrupt}]{\setlength{\rightskip}{0pt plus 5cm}void Wait\-For\-Interrupt (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{_a_d_c_8c_a80ae22f2f73496246542c428c4bec38f}


\subsection{Variable Documentation}
\hypertarget{_a_d_c_8c_a5a00ab78e84682ce357562e66203fbc9}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Buffer0@{Buffer0}}
\index{Buffer0@{Buffer0}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Buffer0}]{\setlength{\rightskip}{0pt plus 5cm}volatile unsigned short$\ast$ Buffer0}}\label{_a_d_c_8c_a5a00ab78e84682ce357562e66203fbc9}


Definition at line 31 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_a5e510bf438e51a8252b7eee23ae1ba88}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Buffer1@{Buffer1}}
\index{Buffer1@{Buffer1}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Buffer1}]{\setlength{\rightskip}{0pt plus 5cm}volatile unsigned short $\ast$ Buffer1}}\label{_a_d_c_8c_a5e510bf438e51a8252b7eee23ae1ba88}


Definition at line 31 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_ac4491cb99756a73234eb72f199e64cad}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Buffer2@{Buffer2}}
\index{Buffer2@{Buffer2}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Buffer2}]{\setlength{\rightskip}{0pt plus 5cm}volatile unsigned short $\ast$ Buffer2}}\label{_a_d_c_8c_ac4491cb99756a73234eb72f199e64cad}


Definition at line 31 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_ac4192b26a52a91f1541df9414277376c}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Buffer3@{Buffer3}}
\index{Buffer3@{Buffer3}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Buffer3}]{\setlength{\rightskip}{0pt plus 5cm}volatile unsigned short $\ast$ Buffer3}}\label{_a_d_c_8c_ac4192b26a52a91f1541df9414277376c}


Definition at line 31 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Collecting@{Collecting}}
\index{Collecting@{Collecting}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Collecting}]{\setlength{\rightskip}{0pt plus 5cm}volatile int Collecting\mbox{[}4\mbox{]} = \{0,0,0,0\}}}\label{_a_d_c_8c_a2dda4a471bcd1c89a9e099a5203dd29a}


Definition at line 30 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Current\-Channel@{Current\-Channel}}
\index{Current\-Channel@{Current\-Channel}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Current\-Channel}]{\setlength{\rightskip}{0pt plus 5cm}volatile int Current\-Channel}}\label{_a_d_c_8c_a63873eac54c61cd643e5dc99b411d585}


Definition at line 34 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!dummy0@{dummy0}}
\index{dummy0@{dummy0}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{dummy0}]{\setlength{\rightskip}{0pt plus 5cm}volatile unsigned short dummy0}}\label{_a_d_c_8c_ac73df7e82cfb7052ed9f39ebd4fb4c3b}


Definition at line 247 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_aa9e74f4242577ace4147b2205821a7a3}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Open@{Open}}
\index{Open@{Open}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Open}]{\setlength{\rightskip}{0pt plus 5cm}volatile int Open\mbox{[}4\mbox{]} = \{0,0,0,0\}}}\label{_a_d_c_8c_aa9e74f4242577ace4147b2205821a7a3}


Definition at line 29 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Sample\-Count@{Sample\-Count}}
\index{Sample\-Count@{Sample\-Count}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Sample\-Count}]{\setlength{\rightskip}{0pt plus 5cm}volatile int Sample\-Count\mbox{[}4\mbox{]}}}\label{_a_d_c_8c_a1b4ccff92594e3fb8d1cc0e2cc44f685}


Definition at line 32 of file A\-D\-C.\-c.

\hypertarget{_a_d_c_8c_a391ced11089028ee480c98537a134f63}{\index{A\-D\-C.\-c@{A\-D\-C.\-c}!Target\-Count@{Target\-Count}}
\index{Target\-Count@{Target\-Count}!ADC.c@{A\-D\-C.\-c}}
\subsubsection[{Target\-Count}]{\setlength{\rightskip}{0pt plus 5cm}volatile int Target\-Count\mbox{[}4\mbox{]}}}\label{_a_d_c_8c_a391ced11089028ee480c98537a134f63}


Definition at line 33 of file A\-D\-C.\-c.

